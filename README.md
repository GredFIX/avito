# Тестовое задание для стажёра Backend в команду Trade Marketing.

## О сервисе
Написан на Python / Flask, можно поднять через докер.

## Установка и запуск
```bash
$ docker-compose up --build
```

## API

### `/metrics` метод POST
Метод сохранения статистики.

#### Принимает на вход: 
- **date** - дата события (в формате YYYY-MM-DD)
- **views** - количество показов
- **clicks** - количество кликов
- **cost** - стоимость кликов (в рублях с точностью до копеек)
Поля **views**, **clicks** и **cost** - опциональные.
#### Пример
```bash
$ curl --header "Content-Type: application/json" \
  --request POST \
  --data '{"date":"2021-02-18","views":500,"clicks":250,"cost":"100,00 ₽"}' \
  http://localhost:5000/metrics
{"status":"OK"}
```

### `/metrics` метод GET
Метод показа статистики.

#### Принимает на вход:
- **from** - дата начала периода (включительно) в формате YYYY-MM-DD
- **to** - дата окончания периода (включительно) в формате YYYY-MM-DD

Отвечает статистикой, отсортированной по дате.
- **date** - дата события
- **views** - количество показов
- **clicks** - количество кликов
- **cost** - стоимость кликов (в рублях с точностью до копеек)
- **cpc** = cost/clicks (средняя стоимость клика) (в рублях с точностью до копеек)
- **cpm** = cost/views * 1000 (средняя стоимость 1000 показов) (в рублях с точностью до копеек)
#### Пример
```bash
$ curl "http://localhost:5000/metrics/2021-02-15&2021-02-18"
[{"date_m":"2021-02-15","views":100,"clicks":50,"cost":"10,00 \u20bd","cpc":"0,20 \u20bd","cpm":"100,00 \u20bd"},
{"date_m":"2021-02-17","views":2000,"clicks":1050,"cost":"1500,00 \u20bd","cpc":"1,43 \u20bd","cpm":"750,00 \u20bd"},
{"date_m":"2021-02-18","views":1000,"clicks":550,"cost":"150,00 \u20bd","cpc":"0,27 \u20bd","cpm":"150,00 \u20bd"}]
```

### `/metrics` метод DELETE
Метод сброса статистики.

Удаляет всю сохраненную статистику.
```bash
$ curl -X DELETE http://localhost:5000/metrics
{"status":"OK"}
```
